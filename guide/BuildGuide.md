# ビルドガイド

> [!TIP]
> 本ページは LaLapad Gen2 のビルドガイドです。
> 
## このガイドについて
### 対象読者
- 初めて自作キーボードを組み立てる方を対象としています。
- はんだごての取り扱いなど、最低限の電子工作の知識や技術がある方を対象としています。

### 作業全体の目安
- 想定作業時間: 60～180分 
- 難易度：キット全体の難易度としては中程度。マイコン取付の難易度が高く、フラックスやはんだ吸い取り線、状態の良いこて先など、正しく道具を揃える必要があります。
  - ソケット取付★☆☆☆☆
  - 5Way取付★☆☆☆☆
  - マイコン取付★★★★★
  - 筐体組み立て★☆☆☆☆

> [!WARNING]
> - 電子工作初心者の方はこの目安に囚われず、十分に時間をかけて作業して頂いて問題ありません。

## 準備

### キット内容物の確認

|パッキング | 内容 | 数量 | 単位 |
| --- | --- | --: | --- |
|-|3DP製ケース|1|Set|
|-|Socket|42|個|
|-|スタンド|4|個|
|ESDバッグ大|PCB本体|1|枚|
|ESDバッグ小|PCBトラックパッド|2|枚|
|ESDバッグ小|FFC6pin|2|枚|
|ポチ袋①|5wayスイッチ|2|個|
|ポチ袋①|LEDpipe|2|個|
|ポチ袋①|マグネット|4|個|
|ポチ袋②|オーバレイ|2|枚|
|ポチ袋②|5wayノブ|2|個|
|ポチ袋②|SW＆RSTパーツ|2|Set|
|ポチ袋②|ガスケットパーツ|2|Set|
|ポチ袋②|ゴム足|4|本|

`[画像プレースホルダ: キット内容物の全体写真]`

> [!WARNING]
> - 内容物に不足があった場合、Boothのメッセージにてショップオーナーにお問い合わせください。
> - 問い合わせへの対応は、購入履歴のあるBoothアカウントによるお問い合わせである事が条件となることを予めご了承ください。


### 別途用意するもの
| 名前 | 数 | 備考 |参考商品|
|:-|---:|:-|:-|
|Seeed Studio XIAO nRF52840 Plus|2個|マイコン本体。XIAO BLEの新バージョンです。9本の追加GPIOが使用でき、より高機能なデバイスに適しています。|[遊舎工房](https://shop.yushakobo.jp/products/10946) [beekeeb.jp](https://shop.beekeeb.jp/products/seeed-studio-xiao-nrf52840-plus) [千石電商](https://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=EEHD-6TTL) [スイッチサイエンス](https://www.switch-science.com/products/10468)|
|Kailh Choc V2互換スイッチ|42個|静音ではDeepSeaMiniがおすすめ。鳴らしつつ打鍵感の軽さを求める場合、COSMOXのShadow huntingをPBTキーキャップと組み合わせるとコリコリ感があって好みです。個人的な意見です。|[TALPKEYBOARD](https://shop.talpkeyboard.com/collections/kailh-chocv2) [遊舎工房](https://shop.yushakobo.jp/collections/all-switches/Kailh-Choc-V2%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81) [Amazon](https://www.amazon.co.jp/dp/B0DSSS4MYJ/) |
|MX軸ロープロファイルキーキャップ|42個|入手性の高さ、バリエーションの豊富さからWomierのPBTキーキャップをおすすめしています。 ※19mmピッチ用且つ、サイズは1Uが38個、1.5Uが4個必要です。|[Womier](https://womierkeyboard.com/products/skyline-r2) [Amazon](https://www.amazon.co.jp/stores/page/90526727-85E5-4BF8-AAD2-FC8A78C07BE3/search?ref_=ast_bln&store_ref=bl_ast_dp_brandLogo_sto&terms=%E3%83%AD%E3%83%BC%E3%83%97%E3%83%AD)|
|3.7Vリチウムポリマーバッテリー|2個|603048型（厚さ6.3mm幅47mm長さ110mm以下）、JST PHコネクタ（ソケットのピッチ2.0mm）※[ソケットの極性に注意！](#%E3%83%90%E3%83%83%E3%83%86%E3%83%AA%E3%83%BC%E5%8F%96%E3%82%8A%E4%BB%98%E3%81%91)|[Amazon](https://www.amazon.co.jp/dp/B09DRJS75J/) [PHコネクタ単品](https://www.amazon.co.jp/dp/B01MXGWMS5/) |
|USB-Cケーブル|2本|充電、ファームウェア書き込み用。何百回と抜き差しする事になるのでマグネット式がおすすめ。||

### 道具類
|優先度| 名前 | 備考 |参考商品|
|---|:-|:-|:-|
|必須|はんだごて|安心と信頼の白光(HAKKO)製、 はんだ付け入門キット。|[amazon](https://www.amazon.co.jp/dp/B0FX3L5485)|
|必須|こて先（K型）|本ビルドガイドではマイコンのはんだ付けにK型のこて先を推奨しています。安心と信頼の白光(HAKKO)製。|[amazon](https://www.amazon.co.jp/dp/B004ORB8MY/)|
|必須|フラックス|端子へのはんだが吸着しやすくなります。マイコン等シビアなはんだ作業では必須。注射器型。無洗浄タイプ。|[amazon](https://www.amazon.co.jp/dp/B078XSQF5T/)|
|必須|はんだ線|精密プリント基板用、極細（0.8mm以下）鉛入り低融点（200度未満）で入手性の高い物を選択。|[amazon](https://www.amazon.co.jp/dp/B0DQ54YDF4/)|
|大|はんだ吸い取り線|ミスしたはんだを吸い取ります。セットに付いてなかったら購入必須。<BR>はんだ済み端子はフラックスが蒸発しているので、フラックスと組み合わせて使用。|[amazon](https://www.amazon.co.jp/dp/B0DWM8W136/)|
|大|こて先クリーナー|こて先の酸化対策に有効なワイヤータイプ。|[amazon](https://www.amazon.co.jp/dp/B000AQQFMG/)|
|必須|ピンセット|はんだ中のパーツ固定用。||
|中|ニッパー|基板の分離用。||
|中|やすり|基板のばり取り用。ピンセットやニッパーの縁で削っても良い。||
|中|マスキングテープ|バッテリーの固定、はんだ中にパーツを仮止めする用。||
|中|瞬間接着剤|圧入したマグネットが取れてしまう場合の固定用。||
|中|テスター|電源投入前に配線のショートをチェックできるので怖さが減ります。またトラブル発生時にサポートのやりとりするために必須となっています。|[amazon](https://www.amazon.co.jp/dp/B0BLZ7GN2X)|
|中|ミニホットプレート|トラブル時にマイコンを取り外すために必須です。本ビルドガイドでは200℃出せる物で十分です。PD65W以上に対応したUSB-C充電器とケーブルが必要です。ヒートガンでも代用可能。|[amazon](https://www.amazon.co.jp/dp/B0DGFFP4CG/)|
|代替品|はんだごて|中級者向け。安価で高出力高機能なはんだごてを使ってみたい場合、FNIRSI社製のスマートはんだごてもオススメ。バリエーションHS-02B-Kは最初からK型のこて先付き。PD100W以上対応のUSB-C充電器とケーブルが必要です。|[アリエク](https://ja.aliexpress.com/item/1005008870209545.html)|

> [!WARNING]
> - 参考商品は全てアフィリエイトの含まれない直リンクです
> - 参考商品はあくまで参考であり、全ての商品が検証済みではないことにご注意ください

## はんだづけ作業前の準備
- はんだごての取り扱い方が分からない事に起因するトラブルが大変多くなっております。
- はんだ付けが初めての場合、作業を始める前に以下の動画に一度目を通しておくことをお勧めいたします。
- https://youtu.be/dQ7AUjb1tkA?t=1198

![image](https://github.com/user-attachments/assets/83b540a6-6ee8-4ddb-bd2a-ac00fa3dd708)

よくあるはんだづけ注意ポイントは以下のとおりです。
- 初心者は鉛入り低融点はんだを使う
- こて先の温度管理（330度前後推奨
- 細すぎるこて先(B型など)を使わない（本ガイドではK型を推奨
- 基板のランド＆パーツへしっかり熱を伝える（加熱時間を増やすのではなく、こて先の表面が広くランド＆パーツの両方に触れるように意識。点ではなく線もしくは面で密着するように意識。
- 以下のケースではフラックスが蒸発しているのでフラックスを塗布する
  - はんだが溶けづらい。パーツに吸着しずらい
  - はんだ付け後、小手先を離した時にはんだがトガる
  - はんだ付け後の仕上がりに光沢がない。ボロボロとしている
- こて先が酸化してはんだが弾かれてしまう時の対策
  - 使用直前に糸はんだを付ける＆クリーンを繰り返すおまじないが有効。
  - 酸化膜の除去には金たわしタイプのクリーナーが有効。
  - 状態がひどい場合はチップリフレッサーを使うか、諦めて品質の良いこて先を買う。
- はんだごてを一時的でも使用しない時は、はんだで覆って電源を切り酸化を防ぐ。

## PCBの組み立て

### PCBの前処理
- ニッパー等で赤丸で囲ったライナー部分をカットします。（素手でも折れると思います

<img width="2058" height="768" alt="2026-02-22_19h42_47" src="https://github.com/user-attachments/assets/c0009840-4969-43ea-9bb8-3fd0595d3fa5" />

> [!WARNING]
> - スイッチを巻き込まないように注意！スイッチとは反対方向に折り曲げて分離するようにしてください。
<img width="1024" height="524" alt="2026-02-22_19h45_04" src="https://github.com/user-attachments/assets/7d9ac846-3eb1-41e4-855a-a9804c664079" />


- メイン基板とトラックパッド基盤のバリ取りをします（任意）

> [!WARNING]
> - 特にトラックパッドはバリによって外形線が膨らむと、後述のカバーにはまらなくなる可能性があるので事前に処理してください。

- `TODO: トラックパッド基板バリ取り（必須）`
`[画像プレースホルダ: PCB前処理の手元写真]`

### ソケットの実装

- PCBの裏面の左右合計42箇所へホットスワップソケットを取り付けていきます。

> [!WARNING]
> - ソケットの向きに注意してください。ソケットのでっぱりとPCBのマークが一致するように。
> - はんだはたっぷり目で接合してください。キースイッチ着脱中にソケットが脱落する原因になります。

<img width="2220" height="1032" alt="2026-02-22_18h58_25" src="https://github.com/user-attachments/assets/c2c6f02a-af6d-402a-b738-958e8f89e414" />

![IMG_20260212_175935](https://github.com/user-attachments/assets/73ecb63c-1b17-4452-8108-dda6425e245f)



### マイコンの実装
- PCBの表面からマイコンに同梱されていたピンヘッダを差し込み、その反対側からマイコンを差し込んで仮で固定します。

> [!WARNING]
> - マイコンはPCBの裏面に固定してください。ソケットやIC類が実装されている面です。
> - ピンヘッダーをはんだ付けしないでください。あとで取り外します。

<img width="2343" height="1081" alt="2026-02-22_19h11_49" src="https://github.com/user-attachments/assets/e51c00bd-5f3e-4c65-b89a-11d11e81e2f0" /><BR/> 
  
<BR/>  
  
- ピンヘッダが刺さっていない方のピンをはんだ付けしていきます。

> [!TIP]
> - 端子にフラックスを塗布し、K型の小手先で加熱しながらはんだを流し込んでいきます。
> - マイコン端子側面とPCBのランドの両方を加熱することを意識します。
> - 十分なフラックスと、流し込むはんだの量が適切なら、こて先をスライドさせることで勝手にはんだの表面張力で接合されていきます。
> - はんだが多すぎてブリッジしてしまった場合、落ち着いてフラックスを追加し、はんだ吸い取り線で余分なはんだを除去します。

<img width="2615" height="1080" alt="2026-02-22_19h17_11" src="https://github.com/user-attachments/assets/f9d9049d-119a-4f29-9c6e-57074507eb8f" /><BR/> 

- ピンヘッダを取り外し、残りのピンもはんだ付けしていきます。

> [!WARNING]
> - ピンヘッダはなるべく垂直にゆっくり引き抜き、マイコンに応力がかからないように注意してください。はんだ済みのピンがPCBのランドごと剥がれてしまいます。

<img width="2121" height="1080" alt="2026-02-22_19h40_38" src="https://github.com/user-attachments/assets/31ddc20a-95b2-42ab-a42b-eb85761e4006" /><BR/> 

- マイコン背面端子をはんだづけします（4ピン）

> [!TIP]
> - 端子にフラックスを塗布し、小手先で加熱しながらはんだを流し込んでいきます。
> - マイコンのバッテリ端子の露出が極狭（画像2枚目）なので、K型こて先の先端を上手く使ってマイコン背面端子とPCBの端面スルーホールを加熱してください。
> - こて先が酸化していると上手く熱が伝わらず、はんだが吸着しないのでこて先をよくクリーニングしてください。
> - 大量のフラックスとはんだを流し込み、わざとブリッジさせてからはんだ吸い取り線で余分なはんだを除去する手法も有効です。

<img width="1665" height="768" alt="2026-02-22_20h00_16" src="https://github.com/user-attachments/assets/43663235-e21a-4c00-b2c1-ded590d175db" /><BR/> 


### 5Wayスイッチの実装
- 5wayスイッチをPCBの表面（マイコンとは反対側）に配置し、6本の足をはんだづけします。

> [!TIP]
> - 5Wayスイッチの裏面に突起があるので、それがPCB側の穴にはまるように位置合わせをしてください。
> - 5Wayスイッチの足とPCBのランド両方をこて先で加熱することを意識してはんだづけしてください。足だけ加熱するとランドにはんだが吸着しないことが多いです。

![IMG_20260212_183225](https://github.com/user-attachments/assets/4ac60ab3-6409-4ee7-9eab-af4d3cfaac61)<BR/> 


### トラックパッドモジュールの組み立て
- 向きに注意しながら、トラックパッドケースにトラックパッドPCBを挿入します。

> [!WARNING]
> - トラックパッドPCB側面のバリ取りが完了していることを事前に確認してください。バリが残っているとケース内でPCBが浮いてしまい、センサーとケースの間に空間ができることで誤動作の原因になります。
> - ケースの突起がある方を目印に、トラックパッドPCBの向きに注意して挿入してください。

<img width="1025" height="891" alt="2026-02-23_16h18_00" src="https://github.com/user-attachments/assets/36512ba2-b328-448b-9684-c9a215a3a28e" /><BR/>


## ファームウェア書き込みと初期動作確認（USB）

### 事前準備
- `.uf2` ファイルを用意します（右手用・左手用）。
- `TODO: 配布先リンク（Gen2）`

### 書き込み手順
- USB接続状態でリセットボタンを2回押してブートローダーへ入ります。
- マウントされたドライブへ `.uf2` をコピーします。
- 左右それぞれで実施します。

`[画像プレースホルダ: ブートローダー認識画面]`

### 動作確認
- `TODO: 電源スイッチ、リセットボタンの動作確認`
- `TODO: キー入力テスト手順`
- `TODO: 左右接続順の注意`
- `TODO: レイヤー確認手順`
- `TODO: トラックパッド確認手順`
- `TODO: バッテリーを仮接続して動作確認`

`[画像プレースホルダ: テストサイトでの確認例]`

 `TODO: 問題発生時にトラブルシューティングへの誘導を注記する`

## ケースへの組み込み

### PCBへのトッププレート・キースイッチ取り付け
- `TODO: トッププレート＆キースイッチ取り付け順序`
- `TODO: LEDパイプ取り付け順序`

`[画像プレースホルダ: プレート固定状態]`

### ボトムケース仮組み
- `TODO: マグネット/スタンド/ゴム足取り付け手順`

`[画像プレースホルダ: ケース仮組みの手順写真]`

### ボトムケースへPCB＆バッテリーの組み込み
- `TODO: バッテリコネクタ接続手順`
- `TODO: バッテリ固定方法（両面テープ等）`
- `TODO: 極性の明記`
- `TODO: PCBをケースへマウントパーツ（TPU）の取り付け手順`
- `TODO: PCBをケースへ収める手順`

### アウターケースの組み込み
- `TODO: アウターケースの組み込み手順`
- `TODO: 干渉チェック`

`[画像プレースホルダ: 組み込み完了状態]`

### トラックパッドの取り付け
- `TODO: 取り付け手順`

`[画像プレースホルダ: 取り付け完了状態]`

### キーキャップとノブ取り付け
- `TODO: 各キーサイズの注意点`
- `TODO: ノブ向き・固定確認`

`[画像プレースホルダ: 外観完成写真（上面）]`

## トラブルシューティング

### ファームウェア書き込みに失敗する
- `TODO: チェック項目`

### 電源が入らない
- `TODO: チェック項目`

### 一部キーが反応しない
- `TODO: チェック項目`

### トラックパッドが反応しない
- `TODO: チェック項目`

### 左右接続が安定しない
- `TODO: チェック項目`

### マイコンが故障したの交換する
- ミニホットプレートを使用します。
-  `TODO: 映像付き解説`

## 完成

> [!TIP]
> お疲れさまでした。  
> 次は `HowtoUse.md` とあわせて初期設定・キーマップ調整を行ってください。
